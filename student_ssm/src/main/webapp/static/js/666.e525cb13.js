"use strict";(self["webpackChunkproject"]=self["webpackChunkproject"]||[]).push([[666],{3666:function(t,a,e){e.r(a),e.d(a,{default:function(){return c}});var s=function(){var t=this,a=t._self._c;return a("div",[a("div",{staticClass:"container"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:t.mass}},[a("el-form-item",{attrs:{label:"学号"}},[a("el-input",{staticStyle:{width:"100px"},attrs:{placeholder:"学号"},model:{value:t.mass.id,callback:function(a){t.$set(t.mass,"id",a)},expression:"mass.id"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.onSubmit()}}},[t._v("学号查询")])],1),a("el-form-item",{attrs:{label:"姓名"}},[a("el-input",{staticStyle:{width:"100px"},attrs:{placeholder:"姓名"},model:{value:t.mass.name,callback:function(a){t.$set(t.mass,"name",a)},expression:"mass.name"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.onSubmit()}}},[t._v("姓名查询")]),a("el-button",{staticStyle:{"margin-left":"50px"},attrs:{type:"primary"},on:{click:function(a){return t.GetData(1)}}},[t._v("显示全部信息")])],1),a("el-form-item",[a("download-excel",{staticClass:"export-excel-wrapper",staticStyle:{display:"inline"},attrs:{data:t.DetailsForm,fields:t.json_fields,head:t.ScoreTitle,name:"表格.xls"}},[a("el-button",{attrs:{type:"success"},on:{click:function(a){return t.getAlldata()}}},[t._v("导出 ")])],1)],1)],1),a("table",{attrs:{id:"containerTable"}},[t._m(0),a("tbody",{attrs:{id:"tdata"}},t._l(t.students,(function(e,s){return a("tr",{key:s+1,staticClass:"trHover"},[a("td",{staticClass:"stuSequence"},[t._v(t._s(s+1))]),a("td",{staticClass:"stuId"},[t._v(t._s(e.id))]),a("td",{staticClass:"stuName"},[t._v(t._s(e.name))]),a("td",{staticClass:"stuJava"},[t._v(t._s(e.java))]),a("td",{staticClass:"stuMath"},[t._v(t._s(e.math))]),a("td",{staticClass:"stuEnglish"},[t._v(t._s(e.english))]),a("td",{staticClass:"stuSports"},[t._v(t._s(e.sports))]),a("td",[a("el-popover",{attrs:{placement:"left",width:"600",trigger:"click"}},[a("div",{staticStyle:{height:"600px",width:"600px"},attrs:{id:"charts"}}),a("a",{staticClass:"updateInf",attrs:{slot:"reference"},on:{click:function(a){return t.showChart(s)}},slot:"reference"},[t._v("查看详细 ")])]),a("a",{staticClass:"updateInf",on:{click:function(a){return t.opeScore(e.id,e.name)}}},[t._v(" 录入成绩")])],1)])})),0),a("tfoot")])],1),a("el-dialog",{attrs:{title:"新增学生成绩信息",visible:t.dialogFormVisible},on:{"update:visible":function(a){t.dialogFormVisible=a}}},[a("el-form",{ref:"form",attrs:{model:t.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"java:"}},[a("el-input",{model:{value:t.form.java,callback:function(a){t.$set(t.form,"java",a)},expression:"form.java"}})],1),a("el-form-item",{attrs:{label:"math:"}},[a("el-input",{model:{value:t.form.math,callback:function(a){t.$set(t.form,"math",a)},expression:"form.math"}})],1),a("el-form-item",{attrs:{label:"english:"}},[a("el-input",{model:{value:t.form.english,callback:function(a){t.$set(t.form,"english",a)},expression:"form.english"}})],1),a("el-form-item",{attrs:{label:"sports:"}},[a("el-input",{model:{value:t.form.sports,callback:function(a){t.$set(t.form,"sports",a)},expression:"form.sports"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(a){t.dialogFormVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.FormSubmit()}}},[t._v("确 定")])],1)],1),a("div",{staticClass:"footer"},[a("div",{staticClass:"rq"},[a("ul",{staticStyle:{"text-align":"center"}},[a("li",{on:{click:function(a){return t.prePage()}}},[t._m(1)]),t._l(t.page.pageNumber,(function(e){return a("li",{key:e,class:t.page.pageNo==e?"active":"",on:{click:function(a){return t.curPage(e)}}},[a("a",[t._v(t._s(e))])])})),a("li",{on:{click:function(a){return t.nextPage()}}},[t._m(2)])],2)])])],1)},o=[function(){var t=this,a=t._self._c;return a("thead",{staticClass:"tableHeaher"},[a("tr",[a("th",[t._v("序号")]),a("th",[t._v("学号")]),a("th",[t._v("姓名")]),a("th",[t._v("java")]),a("th",[t._v("math")]),a("th",[t._v("english")]),a("th",[t._v("sports")]),a("th",[t._v("操作")])])])},function(){var t=this,a=t._self._c;return a("a",[a("span",[t._v("«")])])},function(){var t=this,a=t._self._c;return a("a",[a("span",[t._v("»")])])}],i=(e(4114),e(5090)),l={data(){return{javaTotal:0,mathTotal:0,englishTotal:0,sportsTotal:0,eachTotal:0,ScoreTitle:"学生成绩表",json_fields:{"学号":"id","姓名":"name",java:"java",math:"math",english:"english",sports:"sports",total:"total"},DetailsForm:[],mass:{id:"",name:""},personId:"",personName:"",page:{pageTotal:10,pageNo:1,pageSize:10,pageNumber:5},dialogFormVisible:!1,dialogVisible:!1,form:{java:"",math:"",english:"",sports:""},students:[]}},methods:{showChart(t){console.log(t);var a=i.init(document.getElementById("charts"));a.setOption({title:{text:`${this.students[t].name}的成绩分布图`},tooltip:{},xAxis:{data:["Java","Math","English","Sports"]},yAxis:{},series:[{name:"成绩",type:"bar",data:[this.students[t].java,this.students[t].math,this.students[t].english,this.students[t].sports]}]})},onSubmit(){""===this.mass.id?""===this.mass.name?alert("您还没有输入查找信息！"):this.$axios({url:`http://localhost:8080/searchGradeByName/${this.mass.name}`,method:"get",headers:{"Content-Type":"application/json",token:localStorage.getItem("jwt")}}).then((t=>{console.log(t.data),this.students=[],t.data&&(this.students=t.data),console.log(t)})).catch((t=>{console.log(t),this.$router.push("/login"),alert("请重新登录")})):""===this.mass.name&&this.$axios({url:`http://localhost:8080/searchGradeById/${this.mass.id}`,method:"get",headers:{"Content-Type":"application/json",token:localStorage.getItem("jwt")}}).then((t=>{console.log(t.data),this.students=[],t.data&&(this.students[0]=t.data),console.log(t)})).catch((t=>{console.log(t)}))},prePage(){this.page.pageNo>1&&this.GetData(--this.page.pageNo)},nextPage(){this.page.pageNo<this.page.pageTotal/10&&this.GetData(++this.page.pageNo)},curPage(t){this.GetData(t)},GetData(t){this.page.pageNo=t||this.page.pageNo,this.$axios({url:`http://localhost:8080/searchGradeAll/${this.page.pageNo}`,method:"get",headers:{token:localStorage.getItem("jwt")}}).then((t=>{this.students=t.data.list,this.page.pageTotal=t.data.total,this.page.pageNumber=t.data.pages})).catch((t=>{console.log(t),this.$router.push("/login"),alert("请重新登录")}))},handleClose(){alert("close")},checkinfo(t){console.log(t)},opeScore(t,a){this.personId=t,this.personName=a,this.dialogFormVisible=!0},FormSubmit(){this.dialogFormVisible=!1;var t={id:this.personId,name:this.personName,java:this.form.java?this.form.java:-1,math:this.form.math?this.form.math:-1,english:this.form.english?this.form.english:-1,sports:this.form.sports?this.form.sports:-1};-1===t.java&&-1===t.math&&-1===t.english&&-1===t.sports?alert("请输入一科或者多科成绩"):this.$axios({url:"http://localhost:8080/updateGrade",method:"post",data:t,headers:{"Content-Type":"application/json",token:localStorage.getItem("jwt")}}).then((t=>{this.GetData(this.page.pageNo),console.log(t)})).catch((t=>{console.log(t),this.$router.push("/login"),alert("请重新登录")}))},getAlldata(){this.$axios({url:"http://localhost:8080/getExcelGrade",method:"post",headers:{token:localStorage.getItem("jwt")}}).then((t=>{this.DetailsForm=t.data,this.javaTotal=0,this.mathTotal=0,this.englishTotal=0,this.sportsTotal=0,this.eachTotal=0;for(var a=0;a<t.data.length;a++)this.javaTotal+=this.DetailsForm[a].java,this.mathTotal+=this.DetailsForm[a].math,this.englishTotal+=this.DetailsForm[a].english,this.sportsTotal+=this.DetailsForm[a].sports,this.eachTotal+=this.DetailsForm[a].total;this.DetailsForm.push({id:"",name:"平均值",java:this.javaTotal/this.DetailsForm.length,math:this.mathTotal/this.DetailsForm.length,english:this.englishTotal/this.DetailsForm.length,sports:this.sportsTotal/this.DetailsForm.length,total:this.eachTotal/this.DetailsForm.length})})).catch((t=>{console.log(t),this.$router.push("/login"),alert("请重新登录")}))}},mounted(){this.GetData(1)}},r=l,n=e(1656),h=(0,n.A)(r,s,o,!1,null,null,null),c=h.exports}}]);
//# sourceMappingURL=666.e525cb13.js.map